# å‰ç«¯æ•°æ®æ¥æºæ£€æŸ¥æŠ¥å‘Š

## æ£€æŸ¥æ—¶é—´

2025 å¹´ 12 æœˆ 15 æ—¥

## æ£€æŸ¥èŒƒå›´

å‰ç«¯æ‰€æœ‰è§†å›¾é¡µé¢çš„æ•°æ®æ¥æºï¼ˆçœŸå® API vs ç¡¬ç¼–ç ï¼‰

---

## âœ… å·²å¯¹æ¥çœŸå® API çš„é¡µé¢

### 1. **HomePage.vue** - é¦–é¡µ

- âœ… Banner è½®æ’­å›¾ï¼š`getBanners()` from `@/api/banner`
- âœ… å•†å“åˆ—è¡¨ï¼š`getProducts()` from `@/api/product`
- âœ… æœç´¢å»ºè®®ï¼š`getSearchSuggestions()` from `@/api/product`
- âœ… åŠ å…¥è´­ç‰©è½¦ï¼š`addToCartAPI()` from `@/api/cart`
- âœ… æ”¶è—åŠŸèƒ½ï¼š`addFavorite()`, `removeFavorite()` from `@/api/user`

### 2. **DiscoverPage.vue** - å‘ç°é¡µ

- âœ… å¸–å­åˆ—è¡¨ï¼š`getPosts()` from `@/api/post`
- âœ… ç‚¹èµåŠŸèƒ½ï¼š`toggleLike()` from `@/api/post`
- âœ… å…³æ³¨åŠŸèƒ½ï¼š`followUser()`, `unfollowUser()` from `@/api/user`

### 3. **ProductDetail.vue** - å•†å“è¯¦æƒ…

- âœ… å•†å“è¯¦æƒ…ï¼š`getProductById()` from `@/api/product`
- âœ… åŠ å…¥è´­ç‰©è½¦ï¼š`addToCartAPI()` from `@/api/cart`
- âœ… æ”¶è—çŠ¶æ€æ£€æŸ¥ï¼š`checkFavoriteStatus()` from `@/api/user`
- âœ… æ”¶è—åŠŸèƒ½ï¼š`addFavorite()`, `removeFavorite()` from `@/api/user`

### 4. **ProfilePage.vue** - ä¸ªäººä¸­å¿ƒ

- âœ… ç”¨æˆ·ä¿¡æ¯ï¼š`getUserProfile()` from `@/api/user`
- âœ… ç­¾åˆ°åŠŸèƒ½ï¼š`dailyCheckIn()`, `checkTodayCheckIn()` from `@/api/user`
- âœ… è®¢å•åˆ—è¡¨ï¼š`getOrders()` from `@/api/order`
- âœ… ä¼˜æƒ åˆ¸åˆ—è¡¨ï¼š`getMyCoupons()` from `@/api/coupon`
- âœ… æ”¶è—åˆ—è¡¨ï¼š`getFavorites()` from `@/api/user`

### 5. **FlashSale.vue** - ç§’æ€é¡µ

- âœ… ç§’æ€å•†å“ï¼š`getFlashSaleProducts()` from `@/api/product`
- âœ… åŠ å…¥è´­ç‰©è½¦ï¼š`addToCartAPI()` from `@/api/cart`

### 6. **CouponCenter.vue** - ä¼˜æƒ åˆ¸ä¸­å¿ƒ

- âœ… ä¼˜æƒ åˆ¸åˆ—è¡¨ï¼š`getCoupons()` from `@/api/coupon`
- âœ… é¢†å–ä¼˜æƒ åˆ¸ï¼š`receiveCouponAPI()` from `@/api/coupon`

### 7. **LoginPage.vue** - ç™»å½•é¡µ

- âœ… ç™»å½•ï¼š`login()` from `@/api/auth`

### 8. **RegisterPage.vue** - æ³¨å†Œé¡µ

- âœ… æ³¨å†Œï¼š`register()` from `@/api/auth`
- âœ… å‘é€éªŒè¯ç ï¼š`sendVerifyCode()` from `@/api/auth`

### 9. **SettingsPage.vue** - è®¾ç½®é¡µ

- âœ… ç”¨æˆ·ä¿¡æ¯ï¼š`getUserProfile()` from `@/api/user`
- âš ï¸ ä¿®æ”¹å¤´åƒï¼šç›®å‰æš‚æ—¶ä½¿ç”¨ Base64ï¼ˆTODOï¼šéœ€å¯¹æ¥ä¸Šä¼  APIï¼‰

---

## âŒ ä½¿ç”¨ç¡¬ç¼–ç æ•°æ®çš„é¡µé¢

### 1. **CartPage.vue** - è´­ç‰©è½¦ âš ï¸ **éœ€è¦ä¿®å¤**

```javascript
// ç¬¬218-249è¡Œ
const cartItems = ref<CartItem[]>([
  {
    id: 1,
    image: 'https://...',
    title: 'æ—¶å°šè¿åŠ¨é‹',
    // ... ç¡¬ç¼–ç æ•°æ®
  },
  // ... æ›´å¤šç¡¬ç¼–ç å•†å“
])

// ç¬¬255-270è¡Œ
const recommendProducts = [
  {
    id: 101,
    image: 'https://...',
    title: 'ç”Ÿæ´»ç²¾å“å¥½ç‰©',
    // ... ç¡¬ç¼–ç æ¨èå•†å“
  }
]
```

**éœ€è¦ä¿®æ”¹ä¸ºï¼š**

- ä» `getCart()` API åŠ è½½è´­ç‰©è½¦æ•°æ®
- ä» `getRecommendProducts()` åŠ è½½æ¨èå•†å“

---

### 2. **RankingList.vue** - æ’è¡Œæ¦œ âš ï¸ **éœ€è¦ä¿®å¤**

```javascript
// ç¬¬75-121è¡Œ
const rankings = ref([
  {
    id: 1,
    image: "https://picsum.photos/100/100?random=1",
    title: "çƒ­é”€å•†å“ Top 1",
    // ... ç¡¬ç¼–ç æ’è¡Œæ¦œæ•°æ®
  },
]);
```

**éœ€è¦ä¿®æ”¹ä¸ºï¼š**

- åˆ›å»º `@/api/ranking.ts`
- å®ç° `getRankingList(type: string)` API
- æ ¹æ® tab ç±»å‹åŠ è½½å¯¹åº”æ’è¡Œæ¦œæ•°æ®

---

### 3. **AddressesPage.vue** - åœ°å€ç®¡ç† âš ï¸ **éœ€è¦ä¿®å¤**

```javascript
// ç¬¬141-144è¡Œ
const loadAddresses = () => {
  // TODO: è°ƒç”¨APIåŠ è½½åœ°å€
  addresses.value = [];
};
```

**éœ€è¦ä¿®æ”¹ä¸ºï¼š**

- åˆ›å»º `@/api/address.ts`
- å®ç°åœ°å€ CRUD ç›¸å…³ API
  - `getAddresses()` - è·å–åœ°å€åˆ—è¡¨
  - `addAddress()` - æ·»åŠ åœ°å€
  - `updateAddress()` - æ›´æ–°åœ°å€
  - `deleteAddress()` - åˆ é™¤åœ°å€
  - `setDefaultAddress()` - è®¾ä¸ºé»˜è®¤

---

### 4. **CustomerServicePage.vue** - å®¢æœèŠå¤©

```javascript
// ç¬¬104-114è¡Œ
const messages = ref<Message[]>([
  {
    id: 1,
    text: 'æ‚¨å¥½ï¼æˆ‘æ˜¯æ™ºèƒ½å®¢æœå°åŠ©æ‰‹...',
    isUser: false,
    time: '14:30'
  },
  // ... é¢„è®¾æ¶ˆæ¯
])
```

**è¯´æ˜ï¼š**

- ç›®å‰ä½¿ç”¨æœ¬åœ°æ¨¡æ‹ŸèŠå¤©é€»è¾‘
- åç»­éœ€å¯¹æ¥ WebSocket æˆ–è½®è¯¢ API å®ç°çœŸå®å®¢æœåŠŸèƒ½

---

## ğŸ“Š ç»Ÿè®¡æ€»ç»“

| çŠ¶æ€          | é¡µé¢æ•°é‡ | å æ¯” |
| ------------- | -------- | ---- |
| âœ… å·²å¯¹æ¥ API | 9        | 69%  |
| âŒ ç¡¬ç¼–ç æ•°æ® | 4        | 31%  |

---

## ğŸ”§ å¾…ä¿®å¤ä¼˜å…ˆçº§

### P0 - é«˜ä¼˜å…ˆçº§ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

1. **CartPage.vue** - è´­ç‰©è½¦æ•°æ®

   - å½±å“ï¼šæ— æ³•æŸ¥çœ‹çœŸå®è´­ç‰©è½¦å†…å®¹
   - ä¿®å¤æ—¶é—´ä¼°è®¡ï¼š2 å°æ—¶

2. **AddressesPage.vue** - åœ°å€ç®¡ç†
   - å½±å“ï¼šæ— æ³•ç®¡ç†æ”¶è´§åœ°å€
   - ä¿®å¤æ—¶é—´ä¼°è®¡ï¼š3 å°æ—¶

### P1 - ä¸­ä¼˜å…ˆçº§

3. **RankingList.vue** - æ’è¡Œæ¦œ
   - å½±å“ï¼šæ— æ³•æŸ¥çœ‹çœŸå®æ’è¡Œæ•°æ®
   - ä¿®å¤æ—¶é—´ä¼°è®¡ï¼š2 å°æ—¶

### P2 - ä½ä¼˜å…ˆçº§

4. **CustomerServicePage.vue** - å®¢æœèŠå¤©

   - å½±å“ï¼šæš‚æ—¶å¯ç”¨æ¨¡æ‹Ÿå¯¹è¯
   - ä¿®å¤æ—¶é—´ä¼°è®¡ï¼š4 å°æ—¶ï¼ˆéœ€ WebSocketï¼‰

5. **SettingsPage.vue** - å¤´åƒä¸Šä¼ 
   - å½±å“ï¼šæš‚æ—¶å¯ç”¨ Base64 æ–¹å¼
   - ä¿®å¤æ—¶é—´ä¼°è®¡ï¼š1 å°æ—¶

---

## ğŸ“ å»ºè®®çš„ä¿®å¤æ–¹æ¡ˆ

### 1. è´­ç‰©è½¦ API ä¿®å¤

#### åç«¯éœ€è¦æä¾›çš„æ¥å£ï¼š

```typescript
// @/api/cart.ts éœ€è¦æ·»åŠ 
GET  /cart              // è·å–è´­ç‰©è½¦åˆ—è¡¨
PUT  /cart/:id          // æ›´æ–°è´­ç‰©è½¦é¡¹ï¼ˆæ•°é‡ï¼‰
DELETE /cart/:id        // åˆ é™¤è´­ç‰©è½¦é¡¹
GET  /cart/recommend    // è·å–æ¨èå•†å“
```

#### å‰ç«¯ä¿®æ”¹ï¼š

```typescript
// CartPage.vue
import {
  getCart,
  updateCartItem,
  removeCartItem,
  getRecommendProducts,
} from "@/api/cart";

const loadCart = async () => {
  const data = await getCart();
  cartItems.value = data.items;
};

const loadRecommend = async () => {
  const data = await getRecommendProducts();
  recommendProducts.value = data;
};

onMounted(() => {
  loadCart();
  loadRecommend();
});
```

---

### 2. åœ°å€ç®¡ç† API ä¿®å¤

#### åˆ›å»ºæ–°æ–‡ä»¶ï¼š`@/api/address.ts`

```typescript
export const getAddresses = () => {
  return http.get("/addresses");
};

export const addAddress = (data: any) => {
  return http.post("/addresses", data);
};

export const updateAddress = (id: string, data: any) => {
  return http.put(`/addresses/${id}`, data);
};

export const deleteAddress = (id: string) => {
  return http.delete(`/addresses/${id}`);
};

export const setDefaultAddress = (id: string) => {
  return http.put(`/addresses/${id}/default`);
};
```

---

### 3. æ’è¡Œæ¦œ API ä¿®å¤

#### åˆ›å»ºæ–°æ–‡ä»¶ï¼š`@/api/ranking.ts`

```typescript
export const getRankingList = (type: string) => {
  return http.get("/rankings", { params: { type } });
};
```

---

## âœ… ä¿®å¤å®Œæˆæ ‡å‡†

æ‰€æœ‰é¡µé¢çš„æ•°æ®éƒ½åº”è¯¥ï¼š

1. ä»çœŸå® API è·å–
2. æœ‰ loading çŠ¶æ€æ˜¾ç¤º
3. æœ‰é”™è¯¯å¤„ç†é€»è¾‘
4. æ”¯æŒåˆ·æ–°åŠ è½½

---

## ğŸ“Œ æ³¨æ„äº‹é¡¹

1. **æ¸è¿›å¼ä¿®å¤**ï¼šå»ºè®®ä¼˜å…ˆä¿®å¤æ ¸å¿ƒåŠŸèƒ½ï¼ˆè´­ç‰©è½¦ã€åœ°å€ç®¡ç†ï¼‰
2. **åç«¯ååŒ**ï¼šéƒ¨åˆ† API éœ€è¦åç«¯åŒæ­¥å¼€å‘
3. **æµ‹è¯•éªŒè¯**ï¼šæ¯ä¸ªä¿®å¤åéœ€è¦è”è°ƒæµ‹è¯•
4. **æ•°æ®è¿ç§»**ï¼šæ³¨æ„ç°æœ‰ç¡¬ç¼–ç æ•°æ®çš„æ ¼å¼ä¸ API è¿”å›æ ¼å¼çš„å…¼å®¹æ€§
