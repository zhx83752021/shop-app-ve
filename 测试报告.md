# 电商平台自动化测试报告

## 测试环境

- **前端地址**: http://localhost:5173
- **后端 API**: http://localhost:3001
- **数据库**: PostgreSQL (localhost:5432)
- **测试框架**: Playwright

## 测试覆盖范围

### 1. 用户认证模块

- ✅ 用户注册流程

  - 手机号验证
  - 验证码发送
  - 密码设置
  - 协议勾选
  - 注册成功跳转

- ✅ 用户登录流程
  - 手机号/密码登录
  - Token 存储
  - 登录状态保持

### 2. 首页功能

- ✅ 页面加载
- ✅ Banner 轮播展示
- ✅ 金刚区功能入口
- ✅ 商品列表展示
- ✅ 商品点击跳转

### 3. 商品模块

- ✅ 商品详情页展示
- ✅ 加入购物车功能
- ✅ 商品收藏功能
- ✅ 商品图片加载
- ✅ 价格信息展示

### 4. 发现页

- ✅ 帖子列表展示
- ✅ Tab 切换功能
- ✅ 点赞交互

### 5. 购物车

- ✅ 购物车页面访问
- ✅ 商品列表展示

### 6. 个人中心

- ✅ 用户信息展示
- ✅ 订单列表
- ✅ 收藏列表

### 7. 功能页面

- ✅ 每日秒杀页
- ✅ 优惠券中心
- ✅ 排行榜

### 8. API 接口

- ✅ 健康检查接口
- ✅ 接口响应时间

### 9. 性能测试

- ✅ 页面加载时间
- ✅ DOM 就绪时间
- ✅ 首字节时间

## 如何运行测试

### 1. 安装依赖

```bash
cd e:\app3\frontend
npm install
```

### 2. 安装 Playwright 浏览器

```bash
npx playwright install chromium
```

### 3. 启动服务

**终端 1 - 启动后端**:

```bash
cd e:\app3\backend
npm run dev
```

**终端 2 - 启动前端** (测试会自动启动):

```bash
cd e:\app3\frontend
```

### 4. 运行测试

**运行所有测试**:

```bash
npm run test:e2e
```

**以 UI 模式运行**:

```bash
npm run test:e2e:ui
```

**查看测试报告**:

```bash
npm run test:e2e:report
```

## 测试结果

测试结果将保存在以下位置：

- HTML 报告: `test-results/html/`
- JSON 结果: `test-results/results.json`
- 截图: `test-results/` (失败时)
- 视频: `test-results/` (失败时)

## 测试用户

- **已有用户**:

  - 手机号: 13800138000
  - 密码: 123456

- **新注册用户**: 自动生成手机号

## 注意事项

1. **数据库状态**: 测试前确保数据库已启动并包含测试数据
2. **验证码**: 测试环境下验证码会自动返回，默认为 6 位数字
3. **并发**: 测试设置为串行执行，避免数据竞争
4. **重试**: CI 环境下失败会自动重试 2 次

## 测试指标

- **覆盖率**: 主要用户流程 100%
- **成功率目标**: > 95%
- **页面加载时间**: < 5 秒
- **API 响应时间**: < 1 秒

## 持续改进

- [ ] 添加更多边界情况测试
- [ ] 集成到 CI/CD 流程
- [ ] 增加 API 接口测试
- [ ] 添加性能基准测试
- [ ] 实现视觉回归测试
