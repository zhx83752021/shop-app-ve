// 简化版 Prisma Schema - 只包含核心字段
generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

// 枚举类型
enum Status {
    ACTIVE
    INACTIVE
}

// 分类表
model Category {
    id        String   @id @default(uuid())
    name      String   @db.VarChar(50)
    icon      String?  @db.VarChar(100)
    image     String?  @db.VarChar(500)
    parentId  String?
    sort      Int      @default(0)
    status    Status   @default(ACTIVE)
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@map("categories")
}

// 商品表
model Product {
    id            String   @id @default(uuid())
    categoryId    String
    title         String   @db.VarChar(200)
    description   String?  @db.Text
    mainImage     String   @db.VarChar(500)
    images        String[]
    video         String?  @db.VarChar(500)
    detail        String?  @db.Text
    price         Decimal  @db.Decimal(10, 2)
    originalPrice Decimal  @db.Decimal(10, 2)
    stock         Int      @default(0)
    sales         Int      @default(0)
    views         Int      @default(0)
    tags          String[]
    params        Json?
    status        Status   @default(ACTIVE)
    createdAt     DateTime @default(now())
    updatedAt     DateTime @updatedAt

    @@map("products")
}

// 轮播图表
model Banner {
    id        String   @id @default(uuid())
    title     String   @db.VarChar(100)
    image     String   @db.VarChar(500)
    link      String?  @db.VarChar(500)
    sort      Int      @default(0)
    status    Status   @default(ACTIVE)
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@map("banners")
}

// 优惠券表
model Coupon {
    id             String   @id @default(uuid())
    name           String   @db.VarChar(100)
    type           String   @db.VarChar(20)
    discountAmount Decimal  @db.Decimal(10, 2)
    minAmount      Decimal  @db.Decimal(10, 2)
    totalCount     Int
    receivedCount  Int      @default(0)
    startTime      DateTime
    endTime        DateTime
    status         Status   @default(ACTIVE)
    createdAt      DateTime @default(now())
    updatedAt      DateTime @updatedAt

    @@map("coupons")
}
