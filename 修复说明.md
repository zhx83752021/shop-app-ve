# é¡µé¢æ•°æ®ä¸ºç©ºé—®é¢˜ - ä¿®å¤è¯´æ˜

## ğŸ” é—®é¢˜è¯Šæ–­

é¡µé¢æ˜¾ç¤º"åŠ è½½ä¸­..."ä½†æ²¡æœ‰æ•°æ®çš„åŸå› ï¼š

1. âŒ åç«¯ç¼ºå°‘ Banner API çš„ Controller å’Œ Routes
2. âŒ ä¸»è·¯ç”±é…ç½®é”™è¯¯ï¼ˆBanner è·¯ç”±æŒ‡å‘äº† couponRoutesï¼‰
3. âŒ æ•°æ®åº“ä¸­å¯èƒ½æ²¡æœ‰åˆå§‹åŒ–æ•°æ®

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. åˆ›å»º Banner Controller

- æ–‡ä»¶ï¼š`backend/src/controllers/banner.controller.ts`
- åŠŸèƒ½ï¼šå®ç°è·å– Banner åˆ—è¡¨çš„ API

### 2. åˆ›å»º Banner Routes

- æ–‡ä»¶ï¼š`backend/src/routes/banner.routes.ts`
- è·¯ç”±ï¼š`GET /api/banners`

### 3. ä¿®å¤ä¸»è·¯ç”±é…ç½®

- æ–‡ä»¶ï¼š`backend/src/routes/index.ts`
- ä¿®æ”¹ï¼šå°†é”™è¯¯çš„ `router.get('/banners', couponRoutes)` æ”¹ä¸º `router.use('/banners', bannerRoutes)`
- æ·»åŠ ï¼šå¯¼å…¥ bannerRoutes

### 4. ä¿®å¤æ•°æ®åº“ç§å­è„šæœ¬

- æ–‡ä»¶ï¼š`backend/prisma/seed.ts`
- æ·»åŠ ï¼šdotenv é…ç½®ä»¥åŠ è½½ç¯å¢ƒå˜é‡

### 5. åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶

- æ–‡ä»¶ï¼š`backend/.env`
- é…ç½®ï¼šSupabase æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²å’Œå…¶ä»–ç¯å¢ƒå˜é‡

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### æ–¹æ¡ˆ Aï¼šåœ¨ Supabase æ§åˆ¶å°åˆå§‹åŒ–æ•°æ®ï¼ˆæ¨èï¼‰

1. **ç™»å½• Supabase**

   - è®¿é—®ï¼šhttps://supabase.com/dashboard
   - é€‰æ‹©ä½ çš„é¡¹ç›®

2. **æ‰§è¡Œ SQL è„šæœ¬**

   - ç‚¹å‡»å·¦ä¾§èœå• `SQL Editor`
   - ç‚¹å‡» `New query`
   - å¤åˆ¶ `backend/prisma/quick-seed.sql` æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹
   - ç²˜è´´åˆ° SQL ç¼–è¾‘å™¨
   - ç‚¹å‡» `Run` æ‰§è¡Œ

3. **éªŒè¯æ•°æ®**
   - æ‰§è¡Œå®Œæˆåï¼Œä¼šæ˜¾ç¤ºç»Ÿè®¡ç»“æœ
   - ç¡®è®¤ bannersã€productsã€categories è¡¨éƒ½æœ‰æ•°æ®

### æ–¹æ¡ˆ Bï¼šé‡æ–°éƒ¨ç½²åˆ° Vercel

å¦‚æœä½ çš„é¡¹ç›®éƒ¨ç½²åœ¨ Vercel ä¸Šï¼š

1. **æ¨é€ä»£ç åˆ° Git**

   ```bash
   git add .
   git commit -m "ä¿®å¤ Banner API å’Œæ•°æ®åº“åˆå§‹åŒ–"
   git push
   ```

2. **ç­‰å¾…è‡ªåŠ¨éƒ¨ç½²**

   - Vercel ä¼šè‡ªåŠ¨æ£€æµ‹ä»£ç å˜æ›´å¹¶é‡æ–°éƒ¨ç½²
   - éƒ¨ç½²å®Œæˆåï¼Œæ–°çš„ Banner API å°±ä¼šç”Ÿæ•ˆ

3. **åœ¨éƒ¨ç½²åè¿è¡Œç§å­è„šæœ¬**
   - åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
   - æˆ–è€…ä½¿ç”¨ Supabase æ§åˆ¶å°æ‰§è¡Œ SQL è„šæœ¬ï¼ˆæ¨èï¼‰

### æ–¹æ¡ˆ Cï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒæµ‹è¯•

å¦‚æœä½ æƒ³åœ¨æœ¬åœ°æµ‹è¯•ï¼š

1. **ç¡®ä¿æ•°æ®åº“è¿æ¥æ­£å¸¸**

   ```bash
   cd backend
   npx prisma generate
   npx prisma db push
   ```

2. **æ‰§è¡Œç§å­è„šæœ¬**

   ```bash
   npm run prisma:seed
   ```

   å¦‚æœé‡åˆ°ç½‘ç»œè¿æ¥é—®é¢˜ï¼Œä½¿ç”¨æ–¹æ¡ˆ A åœ¨ Supabase æ§åˆ¶å°æ‰§è¡Œ SQL

3. **å¯åŠ¨åç«¯æœåŠ¡**

   ```bash
   npm run dev
   ```

4. **å¯åŠ¨å‰ç«¯æœåŠ¡**
   ```bash
   cd ../frontend
   npm run dev
   ```

## ğŸ“ æµ‹è¯•éªŒè¯

ä¿®å¤å®Œæˆåï¼Œæµ‹è¯•ä»¥ä¸‹æ¥å£ï¼š

1. **æµ‹è¯• Banner API**

   ```
   GET https://shop.hybergy.cn/api/banners
   ```

   åº”è¿”å› 3 ä¸ªè½®æ’­å›¾æ•°æ®

2. **æµ‹è¯• Product API**

   ```
   GET https://shop.hybergy.cn/api/products?page=1&pageSize=20
   ```

   åº”è¿”å›å•†å“åˆ—è¡¨

3. **æ‰“å¼€é¦–é¡µ**
   ```
   https://shop.hybergy.cn/home
   ```
   åº”æ˜¾ç¤ºè½®æ’­å›¾å’Œå•†å“åˆ—è¡¨ï¼Œä¸å†æ˜¾ç¤º"åŠ è½½ä¸­..."

## âš ï¸ æ³¨æ„äº‹é¡¹

1. å¦‚æœä½¿ç”¨ Supabase æ•°æ®åº“ï¼Œ**å¼ºçƒˆæ¨èä½¿ç”¨æ–¹æ¡ˆ A** ç›´æ¥åœ¨ Supabase æ§åˆ¶å°æ‰§è¡Œ SQL è„šæœ¬
2. ç¡®ä¿ Vercel ç¯å¢ƒå˜é‡ä¸­é…ç½®äº†æ­£ç¡®çš„ `DATABASE_URL`
3. å¦‚æœé¡µé¢ä»æ˜¾ç¤º"åŠ è½½ä¸­..."ï¼Œæ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„ç½‘ç»œè¯·æ±‚å’Œé”™è¯¯ä¿¡æ¯
4. API å“åº”æ ¼å¼å·²ç»Ÿä¸€ï¼Œå‰ç«¯å¯ä»¥æ­£ç¡®è§£ææ•°æ®

## ğŸ‰ é¢„æœŸç»“æœ

ä¿®å¤å®Œæˆåï¼š

- âœ… é¦–é¡µè½®æ’­å›¾æ­£å¸¸æ˜¾ç¤ºï¼ˆ3 å¼ ï¼‰
- âœ… å•†å“åˆ—è¡¨æ­£å¸¸æ˜¾ç¤ºï¼ˆæ¯ä¸ªåˆ†ç±» 2 ä¸ªå•†å“ï¼‰
- âœ… "ç›´æ’­çƒ­å–" æ¨¡å—æ­£å¸¸æ˜¾ç¤º
- âœ… "é™æ—¶ç§’æ€" æ¨¡å—æ­£å¸¸æ˜¾ç¤º
- âœ… "ä¸ºä½ æ¨è" å•†å“ç€‘å¸ƒæµæ­£å¸¸æ˜¾ç¤º
